## 5.6.4 OSPF—Protocolos de enrutamiento de puerta de enlace interior

Internet se compone de una gran cantidad de sistemas autónomos y cada uno de ellos es manejado por una organización diferente y puede usar su propio algoritmo interno de enrutamiento. El protocolo de puerta de enlace interior original de Internet era un protocolo de vector de distancia basado en el algoritmo de Bellman-Ford heredado de ARPANET que funcionó bien en sistemas pequeños, pero no así conforme los sistemas autónomos fueron más grandes.

En 1988, la Fuerza de Tarea de Ingeniería de Internet empezó el trabajo en un sucesor. Ese sucesor, llamado OSPF, que se volvió una norma en 1990 y se ha convertido en el protocolo de puerta de enlace interior principal. OSPF soporta tres tipos de conexiones y redes: las líneas punto a punto exactamente entre dos enrutadores, las redes de multiacceso con difusión y las redes de multiacceso sin difusión.

OSPF funciona resumiendo la colección de redes reales, enrutadores y líneas en un grafo dirigido en el que a cada arco se asigna un costo, calcula la ruta más corta con base en los pesos de los arcos. Una conexión en serie entre dos enrutadores se representa por un par de arcos, uno en cada dirección y una red de multiacceso se representa con un nodo para la red en sí más un nodo para cada enrutador.

OSPF permite dividir los sistemas autónomos en áreas numeradas donde un área es una red o un conjunto de redes inmediatas. Un área es una generalización de una subred. Fuera de un área, su topología y detalles no son visibles. Dentro de un área, cada enrutador tiene la misma base de datos del estado del enlace y ejecuta el mismo algoritmo de la ruta más corta. Su trabajo principal es calcular el camino más corto desde sí mismo a cualquier otro enrutador en el área. Pueden necesitarse tres tipos de rutas: dentro del área, entre áreas y entre sistemas autónomos.

OSPF trabaja intercambiando información entre enrutadores adyacentes, se elige un enrutador como enrutador designado y se dice que es adyacente a todos los demás enrutadores en su LAN, intercambiando información con ellos. Los enrutadores vecinos que no son adyacentes no intercambian información entre sí. Un enrutador designado como respaldo siempre se guarda actualizado, para facilitar la transición en caso de que el primer enrutador designado se cayera y necesitara ser reemplazado de manera inmediata.

Cuando un enrutador se inicia, envía mensajes HELLO en todas sus líneas punto a punto y los multidifunde en las LANs al grupo que contiene los enrutadores restantes. Cada enrutador inunda periódicamente con mensajes LINK STATE UPDATE a cada uno de sus enrutadores adyacentes. Este mensaje da su estado y proporciona los costos usados en la base de datos topológica. Los mensajes DATABASE DESCRIPTION dan los números de secuencia de todas las entradas de estado del enlace poseídas por el emisor actualmente. Cualquier socio puede pedir información del estado del enlace al otro usando los mensajes LINK STATE REQUEST.

Este algoritmo es para que cada par de enrutadores adyacentes haga una verificación para ver quién tiene los datos más recientes, y de esta manera se difunde la nueva información a lo largo del área. Utilizando la inundación de mensajes, cada enrutador informa a todos los demás enrutadores en su área sobre sus vecinos y costos, además permite a cada enrutador construir el grafo para su área y calcular la ruta más corta.

## 5.6.5 BGP—Protocolo de Puerta de Enlace de Frontera

Entre los sistemas autónomos se utiliza el Protocolo de Puerta de Enlace de Frontera, lo que hace es mover lo más eficazmente posible los paquetes del origen al destino y no tiene que preocuparse por las políticas. Los enrutadores del protocolo de puerta de enlace exterior tienen que preocuparse en gran manera por la política. Los protocolos de puerta de enlace exterior y de Frontera se han diseñado para permitir que se implementen muchos tipos de políticas de enrutamiento en el tráfico entre sistemas autónomos.

Las políticas típicas implican consideraciones políticas, de seguridad, o económicas. Las políticas en cada enrutador de BGP se configuran manualmente y no son parte del protocolo. Desde un enrutador de BGP, el mundo consiste en sistemas autónomos y las líneas que los conectan. Dos sistemas autónomos se consideran conectados si hay una línea entre un enrutador fronterizo en cada uno.

Las redes se agrupan en una de tres categorías, las redes stub que tienen sólo una conexión con el grafo de BGP, las redes multiconectadas que podrían usarse para el transporte de tráfico excepto que lo rechacen y las redes de tránsito, como redes dorsales, que están dispuestas a ocuparse de paquetes de terceros, posiblemente con algunas restricciones, y normalmente por pago. Los enrutadores de BGP se comunican entre sí estableciendo conexiones TCP proporcionando comunicación confiable y ocultan todo detalle de red que pase a través de ellos.

Se le conoce como un protocolo de vector de ruta porque cada enrutador de BGP guarda el registro de la ruta utilizada Del mismo modo, en lugar de darle a cada vecino el costo de cada posible destino estimado periódicamente, cada enrutador de BGP les dice el camino exacto que está usando. Cada enrutador de BGP contiene un módulo que examina las rutas a un destino dado y las califica, devolviendo un número para la “distancia” a ese destino por cada ruta. BGP resuelve fácilmente el problema de la cuenta hasta el infinito que plaga otros algoritmos de vector de distancia.
