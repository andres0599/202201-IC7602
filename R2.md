### 3.5 Verificación de protocolos

Los protocolos que se utilizan y los programas que los implementan son complicados, por lo cual, se requiere mucha investigación para encontrar técnicas con las cuales especificar y verificar los protocolos.

La técnica de máquina de estados finitos permite que cada máquina siempre este en un estado específico en cualquier instante. Su estado consiste en todos los valores de sus variables, incluido el contador de programa. El estado del sistema completo es la combinación de todos los estados de las dos máquinas de protocolos y del canal. El estado del canal está determinado por su contenido. De cada estado hay cero o más transiciones posibles a otros estados. Las transiciones ocurren cuando sucede algún evento. Podría ocurrir una transición al enviar una trama, al llegar una trama, al terminar un temporizador o al ocurrir una interrupción. Para el canal, los eventos son la inserción de una trama nueva en el canal por una máquina de protocolo, la entrega de una trama a una máquina de protocolo o la pérdida de una trama debido a una ráfaga de ruido.

El estado inicial es cuando comienza a funcionar o en algún punto poco después. El análisis de asequibilidad es el uso de técnicas de la teoría de grafos para determinar los estados que son alcanzables y los que no. Al principio todos los procesos están en sus estados iniciales y empiezan a ocurrir eventos. Cada evento puede causar que uno de los procesos o el canal emprenda una acción y cambie a un estado nuevo. Luego se puede construir el grafo de asequibilidad y analizar el protocolo. El análisis de asequibilidad puede servir para detectar una variedad de errores en la especificación del protocolo.

Una de las propiedades que debe tener un protocolo con un número de secuencia de 1 bit es que, sin importar la secuencia de eventos que ocurra, el receptor nunca debe entregar dos paquetes impares sin haber intervenido un paquete par, y viceversa. Otro requisito es que no debe haber rutas en las que el emisor pueda cambiar de estado dos veces mientras el estado del receptor permanezca constante. Un bloqueo irreversible es una situación en la que el protocolo no puede seguir avanzando sea cual sea la secuencia de eventos que ocurra. Esta es otra propiedad, la cual consiste en la ausencia de bloques irreversibles.

Otra técnica es la red de Petri, que tiene cuatro elementos básicos: lugares, transiciones, arcos y tokens. Un lugar representa un estado en el que puede estar parte del sistema. Se habilita una transición si hay cuando menos un token de entrada en cada uno de sus lugares de entrada. Cualquier transición habilitada puede dispararse a voluntad, quitando un token de cada lugar de entrada y depositando un token en cada lugar de salida. Si el número de arcos de entrada no es igual al número de arcos de salida, no se conservarán los tokens. Si se habilitan dos o más transiciones, cualquiera de ellas puede dispararse. La decisión de disparo de una transición es indeterminada, por lo que las redes de Petri son útiles para modelar protocolos.

Las redes de Petri pueden servir para detectar fallas de protocolo de una manera parecida a como se hace con máquinas de estados finitos. Las redes de Petri pueden representarse convenientemente en una forma algebraica semejante a una gramática. Cada transición contribuye con una regla a la gramática. El estado actual de la red de Petri se representa como una colección desordenada de lugares, cada uno representado en la colección dependiendo de los tokens que tenga.

### 3.6 Ejemplos de Protocolos de Enlace de Datos

El primer protocolo de enlace de datos fue el SDLC (Control Síncrono de Enlace de Datos). Todos los protocolos se basan en que son orientados a bits y usan el relleno de bits para lograr la transparencia de los datos y difieren en aspectos menores. La estructura de los protocolos a bits consta de varias partes como el campo de Dirección que sirve para identificar una de las terminales, el campo de Control que se utiliza para números de secuencia, confirmaciones de recepción y otros propósitos o el campo de Datos que puede contener cualquier información y puede tener una longitud arbitraria.

Existen 3 tipos de tramas las cuales son de información, de supervisión y no numeradas. La decisión de utilizar la última trama recibida o la siguiente trama esperada es arbitraria, ya que no importa la convención que se utilice, siempre y cuando se use con consistencia.

El bit P/F se utiliza cuando una computadora está sondeado un grupo de terminales. Cuando se usa como P, la computadora está invitando a la terminal a enviar datos. Todas las tramas enviadas por la terminal, excepto la última, tienen el bit P/F establecido en P. El último se establece en F. En algunos de los protocolos el bit P/F sirve para obligar a la otra máquina a enviar de inmediato una trama de supervisión, en lugar de esperar tráfico de regreso al cual superponer la información de la ventana. El bit también tiene algunos usos menores en conexión con las tramas sin número.

Las tramas de supervisión tienen diferentes tipos como el tipo 0 que es una trama de confirmación de recepción llamada Receive Ready para indicar la siguiente trama esperada. El tipo 1 llamado Reject sirve para indicar que se ha detectado un error de transmisión. El tipo 2 es el Receive Not Ready y el tipo 3 es el Selective Reject que solicita la transmisión de una sola trama especificada. Las tramas no numeradas a veces se usan para propósitos de control, aunque también puede servir para llevar datos cuando se solicita un servicio no confiable sin conexión.

Todos los protocolos proporcionan un comando DISC que permite a una máquina anunciar que va a ser desactivada cuentan con un comando que permite a una máquina que acaba de regresar y está en línea anunciar su presencia y obligar el regreso a cero de todos los números de secuencia. Este comando se llama SNRM. Un tercer comando proporcionado por todos los protocolos es FRMR que sirve para indicar que ha llegado una trama con suma de verificación correcta pero semántica imposible.

Internet consiste en máquinas individuales y la infraestructura de comunicación que las conecta. Las líneas punto a punto desempeñan un papel principal en Internet, y que millones de personas tienen conexiones domésticas a Internet a través de módems y líneas de acceso telefónico. Internet necesita de un protocolo punto a punto para diversos propósitos, entre ellos para el tráfico enrutador a enrutador y tráfico usuario doméstico a ISP. Este protocolo realiza detección de errores, soporta múltiples protocolos, permite la negociación de direcciones de IP en el momento de la conexión, permite la autenticación y tiene muchas otras funciones.

Un LCP es un protocolo de control de enlace para activar líneas, probarlas, negociar opciones y desactivarlas ordenadamente cuando ya no son necesarias. Admite circuitos síncronos y asíncronos y codificaciones orientadas a bits y a caracteres. Este proporciona los mecanismos necesarios para que las dos partes, los campos de Dirección y de Control, negocien una opción que simplemente los omita por completo y ahorre dos bytes por trama.
